(this["webpackJsonpmeme-page"]=this["webpackJsonpmeme-page"]||[]).push([[0],{27:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},42:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(2),r=n.n(a),o=n(28),i=n.n(o),s=(n(35),n(5)),l=n(15),u=(n(36),n(18));n(37),n(39);u.a.initializeApp({apiKey:"AIzaSyA5kSJGlUmKC9PftAV8LyHcpdjoaOwKbJ8",authDomain:"meme-generator-fe1c4.firebaseapp.com",databaseURL:"https://meme-generator-fe1c4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"meme-generator-fe1c4",storageBucket:"meme-generator-fe1c4.appspot.com",messagingSenderId:"888796383810",appId:"1:888796383810:web:657b8ecffc3740a026fbdb",measurementId:"G-8007NWQCGB"});var d=u.a.auth(),j=u.a.firestore(),m=new u.a.auth.GoogleAuthProvider,b=Object(a.createContext)({user:null}),h=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(s.a)(n,2),o=r[0],i=r[1];return Object(a.useEffect)((function(){d.onAuthStateChanged((function(e){return i(e)}))}),[]),Object(c.jsx)(b.Provider,{value:{user:o},children:t})},p=(n(42),[{name:"Start",path:"/",exact:!0},{name:"Top Memes",path:"/topmemes"},{name:"Generator",path:"/generator"}]),x=function(){var e=Object(a.useContext)(b).user,t=p.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:e.path,exact:!!e.exact&&e.exact,children:e.name})},e.name)}));return Object(c.jsxs)("header",{children:[Object(c.jsx)("button",{className:"log",onClick:function(){e?d.signOut():d.signInWithPopup(m)},children:e?"Logout":"Sign in with Google"}),Object(c.jsx)("h1",{children:"Meme Generator"}),Object(c.jsx)("nav",{className:"main",children:Object(c.jsxs)("ul",{children:[t,e?Object(c.jsx)("li",{children:Object(c.jsx)(l.b,{to:"/profile",exact:!1,children:"User Profile"})},"profile"):null]})})]})},O=n(6),f=n(19),g=(n(47),function(e){var t=e.title,n=e.upperValue,a=e.bottomValue,r=e.textSize,o=e.handleChange;return Object(c.jsxs)("form",{children:[Object(c.jsx)("label",{children:"Name your meme:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"title",placeholder:"Title...",value:t,onChange:o}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{children:"Add text: "}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"upperText",placeholder:"Upper Text",value:n,onChange:o}),Object(c.jsx)("input",{type:"text",name:"bottomText",placeholder:"Bottom Text",value:a,onChange:o}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{children:"Font Size: "}),Object(c.jsx)("input",{type:"number",name:"textSize",placeholder:"Select font size",value:r,onChange:o})]})}),v=function(e){var t=e.selectedImage,n=e.width,r=e.height,o=Object(a.useContext)(b).user,i=Object(a.useState)(""),l=Object(s.a)(i,2),u=l[0],m=l[1],h=Object(a.useState)(""),p=Object(s.a)(h,2),x=p[0],O=p[1],v=Object(a.useState)(""),w=Object(s.a)(v,2),k=w[0],S=w[1],y=Object(a.useState)(50),C=Object(s.a)(y,2),N=C[0],I=C[1],A=Object(a.useState)("50%"),E=Object(s.a)(A,2),M=E[0],T=E[1],P=Object(a.useState)("10%"),U=Object(s.a)(P,2),L=U[0],z=U[1],B=Object(a.useState)("50%"),F=Object(s.a)(B,2),W=F[0],D=F[1],R=Object(a.useState)("90%"),G=Object(s.a)(R,2),V=G[0],H=G[1],J=Object(a.useState)(!1),K=Object(s.a)(J,2),X=K[0],Y=K[1],q=Object(a.useCallback)((function(e){if(X){var t=document.getElementById("svgImage").getBoundingClientRect(),n=e.clientX-t.left,c=e.clientY-t.top;"uppertxt"===e.target.id?(T("".concat(n,"px")),z("".concat(c,"px"))):"bottomtxt"===e.target.id&&(D("".concat(n,"px")),H("".concat(c,"px")))}}),[X]),Q=Object(a.useCallback)((function(){Y(!0)}),[]),Z=Object(a.useCallback)((function(){Y(!1)}),[]);Object(a.useEffect)((function(){return X&&document.addEventListener("mousemove",q),function(){document.removeEventListener("mousemove",q)}}),[q,Z,X]);var $=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,c=0;c<n;c++)e+=t.charAt(Math.floor(Math.random()*n));return e},_=function(e){var t=e.target.id,n=document.getElementById("createdMeme"),c=(new XMLSerializer).serializeToString(n),a=document.createElement("canvas");a.setAttribute("id","canvas");var r=n.getBoundingClientRect();a.width=r.width,a.height=r.height;var o=document.createElement("img");o.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(c)))),o.onload=function(){a.getContext("2d").drawImage(o,0,0);var e=a.toDataURL("image/png");!function(e,t){var n=d.currentUser;if("download"===e){var c=document.createElement("a");c.download="meme.png",c.href=t,document.body.appendChild(c),c.click()}else if("post"===e){var a={index:$(),date:new Date,title:u,creator:n.uid,url:t,likes:0,whoLiked:[]};""===u?alert("You should add the title"):(j.collection("memes").add(a),alert("Meme posted :)"),m(""),O(""),S(""))}}(t,e)}},ee={fontFamily:"Impact",textTransform:"uppercase",fill:"#FFF",stroke:"#000",userSelect:"none"};return Object(c.jsxs)("div",{className:"memegen",children:[Object(c.jsx)(g,{title:u,upperValue:k,bottomValue:x,textSize:N,handleChange:function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"upperText":S(c);break;case"bottomText":O(c);break;case"textSize":I(c);break;case"title":m(c);break;default:alert("Sorry, ".concat(n," does not exist. Report this to us and we will check what happened."))}}}),Object(c.jsxs)("svg",{id:"createdMeme",width:n,height:r,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[Object(c.jsx)("image",{id:"svgImage",xlinkHref:t,height:r,width:n}),Object(c.jsx)("text",{id:"uppertxt",style:Object(f.a)(Object(f.a)({},ee),{},{fontSize:"".concat(N,"px")}),x:M,y:L,dominantBaseline:"middle",textAnchor:"middle",onMouseDown:Q,onMouseUp:Z,children:k}),Object(c.jsx)("text",{id:"bottomtxt",style:Object(f.a)(Object(f.a)({},ee),{},{fontSize:"".concat(N,"px")}),x:W,y:V,dominantBaseline:"middle",textAnchor:"middle",onMouseDown:Q,onMouseUp:Z,children:x})]}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{id:"download",onClick:_,children:"Download Meme"}),Object(c.jsx)("br",{}),o?Object(c.jsx)("button",{id:"post",onClick:_,children:"Post Meme"}):null]})},w=function(e){var t=e.allMemeImg,n=e.selectImg,a=t.map((function(e){return Object(c.jsx)("p",{className:"gallery-element",onClick:n,"data-url":e.url,children:e.name},e.id)}));return Object(c.jsx)("div",{children:t.length>0?a:Object(c.jsx)("span",{children:"Something is wrong..."})})},k=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(s.a)(o,2),l=i[0],u=i[1],d=Object(a.useState)(""),j=Object(s.a)(d,2),m=j[0],b=j[1],h=Object(a.useState)(""),p=Object(s.a)(h,2),x=p[0],O=p[1];Object(a.useEffect)((function(){fetch("https://api.imgflip.com/get_memes").then((function(e){return e.json()})).then((function(e){var t=e.data.memes;u(t)}))}),[]);return Object(c.jsxs)("div",{className:"maingen",children:[n&&x?Object(c.jsx)(v,{selectedImage:n,width:m,height:x}):null,Object(c.jsx)(w,{allMemeImg:l,selectImg:function(e){var t=e.target.dataset.url,n=document.createElement("canvas"),c=new Image;c.src=t,c.crossOrigin="anonymous",c.onload=function(){var e=c.width/c.height;n.width=700,n.height=n.width/e,n.getContext("2d").drawImage(c,0,0,n.width,n.height);var t=n.toDataURL("image/png");r(t),b("".concat(n.width,"px")),O("".concat(n.height,"px")),document.querySelector(".maingen").scrollIntoView({behavior:"smooth"})}}})]})},S=n(16),y=n.n(S),C=n(21),N=(n(27),function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("memes").get();case 2:t=e.sent,r(t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})))()}),[]),n.length>=2&&n.sort((function(e,t){return e.date<t.date?1:e.date>t.date?-1:0}));var o=n.map((function(e){return Object(c.jsxs)("div",{className:"memeContainer",id:e.index,children:[Object(c.jsxs)("div",{className:"likes",children:[Object(c.jsx)("span",{className:"minus",children:"-"}),Object(c.jsx)("span",{className:"like-num",children:e.likes}),Object(c.jsx)("span",{className:"plus",children:"+"})]}),Object(c.jsx)("p",{className:"title",children:e.title}),Object(c.jsx)("img",{src:e.url,alt:"meme"}),Object(c.jsxs)("p",{className:"creator",children:["Posted by: ",Object(c.jsx)("span",{children:e.creator})]})]},e.index)}));return Object(c.jsx)("div",{className:"HomePage",children:n.length>0?o:Object(c.jsx)("p",{children:"No memes, sorry..."})})}),I=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=d.currentUser;Object(a.useEffect)((function(){Object(C.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("memes").get();case 2:t=e.sent,r(t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})))()}),[]);var i=n.filter((function(e){return e.creator===o.uid?e:null})).map((function(e){return Object(c.jsxs)("div",{className:"memeContainer",id:e.index,children:[Object(c.jsxs)("div",{className:"likes",children:[Object(c.jsx)("span",{className:"minus",children:"-"}),Object(c.jsx)("span",{className:"like-num",children:e.likes}),Object(c.jsx)("span",{className:"plus",children:"+"})]}),Object(c.jsx)("p",{className:"title",children:e.title}),Object(c.jsx)("img",{src:e.url,alt:"meme"}),Object(c.jsxs)("p",{className:"creator",children:["Posted by: ",Object(c.jsx)("span",{children:e.creator})]})]},e.index)}));return Object(c.jsxs)("div",{className:"HomePage",children:[Object(c.jsx)("h4",{children:"Your created memes:"}),n.length>0?i:Object(c.jsx)("p",{children:"No memes, sorry..."})]})},A=function(){var e=Object(a.useContext)(b).user;return Object(c.jsxs)(O.c,{children:[Object(c.jsx)(O.a,{exact:!0,path:"/",component:N}),Object(c.jsx)(O.a,{path:"/topmemes",render:function(){return Object(c.jsx)("h2",{children:"Top memy - wy\u015bwietlamy memy posortowane po ilo\u015bciu lajk\xf3w"})}}),Object(c.jsx)(O.a,{path:"/generator",component:k}),e?Object(c.jsx)(O.a,{path:"/profile",component:I}):null,Object(c.jsx)(O.a,{render:function(){return Object(c.jsx)("h2",{children:"Strona nie istnieje..."})}})]})},E=n.p+"static/media/loading.01b22d1d.gif",M=function(){return Object(c.jsx)("div",{style:{backgroundColor:"#0099AA",width:"100%",height:"100vh"},children:Object(c.jsx)("img",{src:E,alt:"splash-screen",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})})},T=function(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){setTimeout((function(){r(!1)}),2e3)}),[]),Object(c.jsx)(c.Fragment,{children:n?Object(c.jsx)(M,{}):Object(c.jsx)(h,{children:Object(c.jsx)(l.a,{basename:"/meme-generator",children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(x,{}),Object(c.jsx)(A,{})]})})})})},P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/meme-generator",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/meme-generator","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):U(t,e)}))}}(),L()}},[[49,1,2]]]);
//# sourceMappingURL=main.b7ec114d.chunk.js.map